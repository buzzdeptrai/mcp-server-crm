<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>MCP Tool Import Tester</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 2em; }
    input { padding: 8px; width: 400px; }
    button { padding: 8px 12px; margin-left: 8px; }
    pre { background: #f5f5f5; padding: 1em; border-radius: 6px; }
  </style>
</head>
<body>
  <h2>üß™ MCP Import Tool Tester (Gi·ªëng RowBoat Labs)</h2>
  <input id="sseUrl" placeholder="Nh·∫≠p URL SSE, v√≠ d·ª•: https://.../sse">
  <button onclick="connect()">K·∫øt n·ªëi</button>

  <h3>K·∫øt qu·∫£:</h3>
  <div id="status">‚è≥ Ch∆∞a k·∫øt n·ªëi</div>
  <pre id="output">...</pre>

  <script>
    function connect() {
      const url = document.getElementById("sseUrl").value;
      const statusEl = document.getElementById("status");
      const outputEl = document.getElementById("output");

      if (!url) {
        alert("B·∫°n ch∆∞a nh·∫≠p URL!");
        return;
      }

      statusEl.textContent = "üîÑ ƒêang k·∫øt n·ªëi...";
      outputEl.textContent = "";

      const source = new EventSource(url);

      source.addEventListener("init", (event) => {
        const data = JSON.parse(event.data);
        console.log("Tools:", data);

        if (!data.tools || !Array.isArray(data.tools)) {
          statusEl.textContent = "‚ùå Kh√¥ng t√¨m th·∫•y tools h·ª£p l·ªá.";
          outputEl.textContent = JSON.stringify(data, null, 2);
          return;
        }

        statusEl.textContent = `‚úÖ Nh·∫≠n ${data.tools.length} tools th√†nh c√¥ng!`;
        outputEl.textContent = JSON.stringify(data.tools, null, 2);

        source.close(); // ƒë√≥ng lu√¥n sau khi nh·∫≠n init
      });

      source.onerror = (err) => {
        statusEl.textContent = "‚ùå K·∫øt n·ªëi l·ªói ho·∫∑c kh√¥ng nh·∫≠n ƒë∆∞·ª£c d·ªØ li·ªáu.";
        outputEl.textContent = JSON.stringify(err, null, 2);
        source.close();
      };
    }
  </script>
</body>
</html>
